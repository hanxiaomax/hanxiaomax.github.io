---
layout: post
title: "GIT两分钟指南"
category: trans
tags: [git,技术翻译]
image:
  feature: article.jpg
comments: True
share: true

---

受到[5分钟Git指南](http://classic.scottr.org/presentations/git-in-5-minutes/)的启发，我决定更进一步，写一篇用更短时间就能看完的git教程。当然，这是指最简单git！但是对于新手个人开发者来说足够了，而且给你提供一个可以继续成长的起点。


能够从本指南有所收获的例子也许是这样的，一个高中生正在进行他(或是她)的第一个项目，而且并不需要和别人分享代码。（特别的，想到了我的儿子，他已经写了很多的代码但是没有时间去学习一个版本控制工具。这份指南是为他写的，当然我觉得别人也能用的到。）对他来说，使用git是很有道理的。和Subversion不同，他可以很容易的使用它而起不需要服务器（只要他对硬盘进行定期的备份，他确实会这样做）。而且在一个两分钟的指南中，没有时间去关心服务器的事情，所以特别合适。

再次强调，本文提及的使用git的方法，仅对那些会定期备份硬盘的个人开发者来讲是合适的。两分钟git指南加上一个备份策略，你可以自信的提交文件并且知道如果自己需要的话，你可以查看改动或是恢复之前的版本。

为什么学习git是有必要的？好吧，对于开发者来讲，最烦人，最耗费时间的事情就发现之前可以工作的程序现在无法工作了。在这种情况下，能够看到之前的改动并且回退到之前的版本会有很大的帮助。同样的，能够回退到之前的状态可以让你自由的测试新的方法--做实验完全没有问题因为你总是可以重来。

如果有机会的话，你绝对应该学一下暂存(staging)和分支(branching)，还有向（从）远端仓库推送(pushing)和拉取(pulling)。但是你下面要学到的东西同样很有用。
注意：下面提到的文件名，你都可以使用文件路径。

####使用前的设置

如果你还没有安装git的话，请查看 Getting Started page上的安装指南。
第一次使用git，我们假定你正在一个文件夹内工作，该文件夹是你项目的主文件夹。你需要做的第一件事情是：

`git init`

初始化文件夹供git使用。


####告诉git你要处理的文件
现在你需要告诉git，需要考虑哪些文件。如果你有N个文件，你可以使用
`git add <file1>  <file2> … <fileN>`

来添加他们。或是你想要把目录下的文件全部添加，你可以使用

`git add .`(句号是命令的一部分，表示当前目录。)

####提交改动
下一步，我们需要提交改动。任何时候，你想要提交一个文件或多个文件的改动，运行

`git commit <file1> <file2> … <fileN> -m “This is your commit message"`

或者，提交全部有改动的文件：

`git commit -a -m “This is your commit message for all changed files"`

确保你的提交信息能够包含足够的描述信息，让你可以搞清楚你想要回退到哪个版本。

####查看历史
现在你需要一个查看旧版本的方法。为了查看提交信息和该次提交的hash值（代表版本的一串数字）可以使用如下命令，使其以每行一个版本的方式输出

`git log --pretty=oneline`

它的输出看起来是下面这样的，每次提交的hash值和它的提交信息一起显示

{% highlight bash%}
dbe28a0a1eba45d823d309cc3659069fc16297e3 4th version I wanted to commit
  13bbf385e6d1f94c7f11a4cdfa2a7688dfdd84f8 3rd
  a1696f671fb90dc8ea34645a6f851d0ab0152fc2 2nd version
  179e59467039c7a7b81f676297415c8e018542a0 first version
{% endhighlight %}

注意，你同样可以使用

`git log`
来输出一个更冗长的信息，每个版本信息占用多行，而且你可以使用

`git log --pretty=oneline -- <filename>`

来查看某个具体文件的改动。（注意第二个--后面的空格！）

####恢复旧版本
最终，恢复之前版本的文件，你只需要使用hash值的前几个数字（要保证足够的区分度）：

` git checkout <hash> -- <filename>`

比如

`git checkout 179e59467039 -- myfile`

会把我的名为myfile的文件的内容回退到

`179e59467039c7a7b81f676297415c8e018542a0`

这个状态（这里是指本文件的第一次提交版本）


####查看改动
通常你不会不先查看一下文件变化就回退到旧的版本！查看文件当前版本和历史版本的区别，你需要指明历史版本的hash值：

` git diff <hash> -- <filename>`

你同样可以比较两个历史版本的差别：

` git diff <hash1>  <hash2> -- <filename>`

####还有一件事——可选项——也许会让本文多一分钟
也许您仅仅使用以上功能就可以受益匪浅，你会还有一件事是很有用的。如果你现在不想看的话，就别看了——找机会下次再看。

有时候，你不清楚有哪些文件被改动了。你可以使用如下命令找到它们：

`git status`

这会生成一份文件列表以及他们的状态。比如，一个还没有被`git add` 的文件会被显示为`untracked`；如果你想要追踪这个文件，就需要添加它。

在我的两分钟教程中，我把这个命令当做可选项的原因是，这个命令可能会有点笨拙。因为它可能会列出很多你并不关心的文件的状态。举例来说，如果你使用Python语言编程，它会列出Python生成的编译文件.pyc。你肯定想解决这一问题。

为了解决这个问题，你需要在目录下创建一个叫`.gitignore` 的文件。比如你在使用Python 2.x的项目，你会希望在这个文件中（至少）包含：
`*.pyc`
注意，`.gitignore`  可以理解`*` 通配符。如果你想要隐藏一个完整的目录，你要在文件夹名后面加一个斜杠。例如你使用Python 3.x编程，所有的便以文件都会进入一个叫`__pycache__` 的文件夹，所以你需要在`.gitignore` 添加` __pycache__/`

####这就是本教程！把这份教程放在手边就行啦。

这些就是你开始使用git所需要知道的东西，只要你有定期备份硬盘的习惯。如果你不想要记忆除了提交命令意外的其他东西，仅需要把本教程保存进书签，你就可以无障碍的提交，对比版本，回退到旧版本！

记住，本教程准确来讲是最小化教程，让你可以用git做一些有用的事情。对于分支，暂存和通过远程服务器和他人共享代码这些强大的功能，请务必去看五分钟git教程，如果有机会甚至应该去看更长的教程！
